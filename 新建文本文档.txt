ĞÏà¡??                >  ?	                         ?ÿÿ    ?ÿÿ        ÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿ?ÿÿ                      	   
      ?ÿÿ                           ?ÿÿ                           ?ÿÿI   "   #   $   %   &   '   (   )   *   ?ÿÿ,   -   .   /   0   1   2   3   4   ?ÿÿ6   7   8   9   :   ;   <   =   >   ?ÿÿ@   A   B   C   D   E   F   G   H   ?ÿÿ?ÿÿK   L   M   N   O   P   Q   R   S   ?ÿÿU   V   W   X   Y   Z   [   \   ]   ?ÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿR o o t   E n t r y                                               ÿÿÿÿÿÿÿÿ                               ?[???ÿÿ        W o r k s p a c e   S t a t e                                      	      ÿÿÿÿ                                              B r o w s e r                                                          ÿÿÿÿ                                              E d i t o r                                                         ÿÿÿÿÿÿÿÿ                                                   ĞÂ½¨ÎÄ±¾ÎÄµµ&C:\Users\dell\Desktop\ĞÂ½¨ÎÄ±¾ÎÄµµ.dsp                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             ? Ğ???ë\1800730136 wei peng\1800730136.c(126) : warning C4013: 'mine_count' undefined; assuming extern returning int
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                ? Ğ???ë\1800730136 wei peng\1800730136.c(126) : warning C4013: 'mine_count' undefined; assuming extern returning int
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           MLJL                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ? Ğ???ë\1800730136 wei peng\1800730136.c(126) : warning C4013: 'mine_count' undefined; assuming extern returning int
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         W o r k s p a c e   W i n d o w                                 "    ÿÿÿÿÿÿÿÿ                                    !          I P I _ °eú^‡e,g‡ech                                              ÿÿÿÿÿÿÿÿÿÿÿÿ                                    +          I P I _                                                         
  ÿÿÿÿÿÿÿÿÿÿÿÿ                                    5          C l a s s V i e w   W i n d o w                                 "  ÿÿÿÿÿÿÿÿÿÿÿÿ                                    ?            ĞÂ½¨ÎÄ±¾ÎÄµµ	ClassView<EOR><EOR><EOR>ĞÂ½¨ÎÄ±¾ÎÄµµ classes<EOR>ĞÂ½¨ÎÄ±¾ÎÄµµ classes<EOR>FileView<EOR>¹¤×÷Çø 'ĞÂ½¨ÎÄ±¾ÎÄµµ': 1 ¹¤³Ì<EOR><EOR>¹¤×÷Çø 'ĞÂ½¨ÎÄ±¾ÎÄµµ': 1 ¹¤³Ì<EOR>ĞÂ½¨ÎÄ±¾ÎÄµµ files<EOR><EOR>	ClassView<EOR>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           ? Ğ???ë\1800730136 wei peng\1800730136.c(126) : warning C4013: 'mine_count' undefined; assuming extern returning int
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         `?     ĞÂ½¨ÎÄ±¾ÎÄµµ - Win32 DebugĞÂ½¨ÎÄ±¾ÎÄµµ.dsp  CProjectĞÂ½¨ÎÄ±¾ÎÄµµ - Win32 DebugĞÂ½¨ÎÄ±¾ÎÄµµ - Win32 Release   €        ĞÂ½¨ÎÄ±¾ÎÄµµ - Win32 Debug   €       ?       SSBR   CTargetItemĞÂ½¨ÎÄ±¾ÎÄµµ - Win32 Debug    SSBRDJWDJW                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  #include <stdio.h>
#include <time.h>  //»ñµÃÊ±¼ä
#include <string.h>
#include <stdlib.h>
#define s sizeof(struct user)
#define ROW 10
#define COL 10
struct user
{
	char name[20];
	int count;
	int time;
	int age;

}use[20];
void information(int b)
{
	int i, k = 0;
	FILE *fp;/*¶¨ÒåÎÄ¼şÖ¸Õë*/
	if ((fp = fopen("a.txt", "a+")) == NULL)/*´ò¿ªÖ¸¶¨ÎÄ¼ş*/
	{
		printf("´ò¿ªÊ§°Ü\n");
		exit(0);//return;
	}
	while (!feof(fp))//¼ì²éÎÄ¼ş½áÊø
	{
		if (fread(&use[k], s, 1, fp) == 1)
			k++;/*Í³¼Æµ±Ç°¼ÇÂ¼ÌõÊı*/
	}
	fclose(fp);
	if ((fp = fopen("a.txt", "wb")) == NULL)
	{
		printf("´ò¿ªÊ§°Ü\n");
		exit(0);//return;
	}

	for (i = 0;i<k;i++)
	{
		fwrite(&use[i], s, 1, fp);//ÏòÖ¸¶¨µÄ´ÅÅÌÎÄ¼şĞ´ÈëĞÅÏ¢
	}
	  printf("\n ĞÕÃû:  ÄêÁä:  À×Êı:  Ê±¼ä:  \n");
      scanf("%s",use[k].name);
	for(i=0;i<k;i++)
	  {if(use[i].name==use[k].name)
	    {
	    printf("´ËÃû×ÖÒÑ´æÔÚ!");
	   
	    fclose(fp);
	    return;
	    }
	  }
    scanf("%d",&use[k].age);
	scanf("%d",&use[k].count);
	scanf("%d",&use[k].time);
  
	if(fwrite(&use[k],s,1,fp)!=1)/*½«ĞÂÂ¼ÈëµÄĞÅÏ¢Ğ´ÈëÖ¸¶¨µÄ´ÅÅÌÎÄ¼ş*/
     {
		 printf("´æÈ¡Ê§°Ü!");
       
	 }
     else
	 {
		 
		 k++;
	 }
  
  fclose(fp);
  
}
void output()
{  int i,k=0;
   FILE *fp;
   fp=fopen("a.txt","rb");
   while(!feof(fp))
   {
   if(fread(&use[k] ,s,1,fp)==1) 
   k++;
   }  
   fclose(fp);
   printf(" ĞÕÃû  ÄêÁä  À×Êı  Ê±¼ä\n");
   printf("-------------------------------------\n");
   for(i=0;i<k;i++)
   { 
	   printf("%s    %d   %d  %d  ",use[i].name,use[i].age,use[i].count,use[i].time);
       printf("\n"); 
   }
}
int mine_count(char board[ROW + 2][COL + 2], int row, int col) //Í³¼ÆÊ£Óà*µÄÊıÄ¿

{

	int count = 0;

	for (int i = 1; i < (row - 1); i++)

	{

		for (int j = 1; j < (col - 1); j++)

		{

			if (board[i][j] == '*')

				count++;

		}

	}

	return count;

}


int mine_num(char mine[ROW + 2][COL + 2], int x, int y)//Í³¼ÆÄ³¸öÎ»ÖÃÀ×µÄ¸öÊı
{
	return ((mine[x - 1][y - 1] - '0') + (mine[x][y + 1] - '0') + (mine[x + 1][y + 1] - '0') + (mine[x - 1][y] - '0')
		+ (mine[x][y - 1] - '0') + (mine[x + 1][y] - '0') + (mine[x + 1][y - 1] - '0') + (mine[x - 1][y + 1] - '0'));

}
void spread_board(char board[ROW + 2][COL + 2], char mine[ROW + 2][COL + 2], int x, int y)
{
	if ((1 <= x && x <= 10) && (1 <= y && y <= 10) && (mine[x][y] != '1') && (board[x][y] == '*'))
	{
		if (mine_num(mine, x, y)>0)
		{
			board[x][y] = mine_num(mine, x, y) + '0';
		}
		else
		{
			board[x][y] = ' ';
			spread_board(board, mine, x - 1, y - 1);
			spread_board(board, mine, x - 1, y);
			spread_board(board, mine, x - 1, y + 1);
			spread_board(board, mine, x, y + 1);
			spread_board(board, mine, x + 1, y + 1);
			spread_board(board, mine, x + 1, y);
			spread_board(board, mine, x + 1, y - 1);
			spread_board(board, mine, x, y - 1);


		}
	}
}
void set_mine(char mine[ROW + 2][COL + 2], int row, int col, int num)
{
	int i = 0;
	srand((unsigned int)(time)(NULL));/*ÒÔÏÖÔÚµÄÏµÍ³Ê±¼ä×÷ÎªËæ»úÊıµÄÖÖ×ÓÀ´²úÉúËæ»úÊı£¡
									  ÖÁÓÚNULLÕâ¸ö²ÎÊı¡£Ö»ÓĞÉèÖÃ³ÉNULL²ÅÄÜ»ñµÃÏµÍ³µÄÊ±¼ä£¡ÔÚµ÷ÓÃrand£¨£©Õâ¸öº¯ÊıÖ®Ç°Ê¹ÓÃ*/
	for (i = 0; i<num; i++)
	{
		int x = rand() % (row - 2) + 1;
		int y = rand() % (col - 2) + 1;
		if (mine[x][y] == '0')
		{
			mine[x][y] = '1';
		}
		else
		{
			i--;
		}
	}
}

void menu()
{
	printf("**********************\n");
	printf("***   1.¿ªÊ¼ÓÎÏ·   ***\n");
	printf("***   2.ÍË³öÓÎÏ·   ***\n");
	printf("***   3.ÓÃ»§ĞÅÏ¢   ***\n");
	printf("**********************\n");
	printf("   ÇëÑ¡Ôñ½ÓÏÂÀ´µÄÂ·Ïß:> ");
}
void print_board(char board[ROW + 2][COL + 2], int row, int col)
{
	printf("\n");
	int i = 0;
	printf("   1 2 3 4 5 6 7 8 9 10\n");
	for (i = 1; i<row - 1; i++)
	{
		int j = 0;
		printf("%d", i);
		if (i != 10)
			printf(" ");
		for (j = 1; j<(col - 1); j++)
		{
			printf("%2c", board[i][j]);
		}
		printf("\n");
	}
}
int my_game()    //ÓÎÏ·Ö÷Ìå2
{
	char a[20];
	int begin, end;//¼ÆÊ±
	int x = 0, y = 0;
	int count = 0;//Ê£ÓàÀ×Êı
	int num = 0;
	char mine[ROW + 2][COL + 2];//¶¨ÒåÀ×Çø£¬¸úÃÔÎíÇø
	char board[ROW + 2][COL + 2];
	char q;
	//³õÊ¼»¯À×Çø£¬ÃÔÎíÇø
	memset(mine, '0', sizeof(mine));//À´¶ÔÒ»¶ÎÄÚ´æ¿Õ¼äÈ«²¿ÉèÖÃÎªÄ³¸ö×Ö·û£¬Ò»°ãÓÃÔÚ¶Ô¶¨ÒåµÄ×Ö·û´®½øĞĞ³õÊ¼»¯Îª¡® ¡¯»ò¡®/0¡¯
	memset(board, '*', sizeof(board));
	//²¼À×
	printf("ÇëÊäÈëÀ×Êı£º>");
	scanf("%d", &num);
	begin = time(NULL);
	set_mine(mine, (ROW + 2), (COL + 2), num);//3
											  //´òÓ¡ÃÔÎíÇø
	print_board(board, (ROW + 2), (COL + 2));//4
	while (1)
	{
		//ÅĞ¶ÏÊÇ·ñÊ¤Àû
		count = mine_count(board, (ROW + 2), (COL + 2));
		if (count == num)
		{
			printf("¹§Ï²Äã£¬³É¹¦µÄÅÅµôÁËËùÓĞµÄÀ×£¡£¡£¡\n");
			end = time(NULL);//clock();	//¼ÆÊ±½áÊø
			printf("\n\nRunning Time£º%dms\n", end - begin);
			return (end - begin);
			break;
		}
		//ÊäÈë×ø±ê£¬Í¬Ê±ÅĞ¶Ï×ø±êÊÇ·ñÔÚºÏ·¨·¶Î§ÄÚ
		printf("please input (x,y)");
		scanf("%d",&y);
		scanf("%c",&q);
		scanf("%d",&x);
		if (x<1||x>10||y>10||y<1)
		{
			printf("ÄãÊäÈëµÄ×ø±ê³¬³ö·¶Î§£¡\n");
		}
		if ((x >= 1 && x <= 10) && (y <= 10 && y >= 1))
		{
			if (mine[x][y] == '1')
			{
				printf("sorry,Äã²Èµ½À×£¬Çë£¡ÔÙ½ÓÔÙÀ÷ \n");
				end = time(NULL);//clock();	//¼ÆÊ±½áÊø
				printf("\nRunning Time£º%ds\n", end - begin);
				return -(end - begin);

				break;
			}
			else
			{
				spread_board(board, mine, x, y);
				print_board(board, (ROW + 2), (COL + 2));
			}
		}

	}
}


int main()
{
	int input = 0,b=0,a;
	do
	{

		menu();
		scanf("%d", &input);
		switch (input)
		{
		case 1:b=my_game();break;//1
		case 2:printf("ÍË³öÓÎÏ·¡£\n");break;
		case 3:output();break;
		default:printf("\nÊäÈë´íÎó£¬ÇëÖØĞÂÊäÈë£¡£¡\n");break;
		}
		if(b!=0)
		information(b);
		printf("ÊÇ·ñÇåÆÁ,1/0\n");
			scanf("%d",&a);
			if(a==1)
				system("cls");
	} while (input != 2);
	return 0;
}                                                                                                                                                                         